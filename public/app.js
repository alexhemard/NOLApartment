// Generated by CoffeeScript 1.3.3
(function() {

  $(function() {
    var map, mapOptions;
    mapOptions = {
      center: new google.maps.LatLng(29.9728, -90.05902),
      zoom: 13,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(($('#map_canvas'))[0], mapOptions);
    console.log($('#map_canvas'));
    return $.getJSON('/apartments', function(data) {
      var a, apartment, infoWindow, marker, _i, _len, _results;
      _results = [];
      for (_i = 0, _len = data.length; _i < _len; _i++) {
        a = data[_i];
        apartment = new Apartment(a);
        marker = new google.maps.Marker({
          position: new google.maps.LatLng(apartment.latitude, apartment.longitude),
          html: '<a href="' + apartment.url + '" target="_blank">' + apartment.title + '</a>' + ' beds: ' + apartment.beds + 'price: ' + apartment.price
        });
        infoWindow = new google.maps.InfoWindow();
        marker.setMap(map);
        _results.push(google.maps.event.addListener(marker, 'click', function() {
          infoWindow.setContent(this.html);
          return infoWindow.open(map, this);
        }));
      }
      return _results;
    });
  });

}).call(this);
